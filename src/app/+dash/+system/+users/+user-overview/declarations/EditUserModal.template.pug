form(#userEditForm="", (submit)="save()")
  h2(matDialogTitle) Editing user: {{editedUser?.DisplayName}}

  mat-dialog-content
    mat-spinner(*ngIf="editedUser == undefined")

    table
      tr(*ngIf="editedUser?.Caster")
        td: small Special user:
        td.text-primary Channel owner
      tr(*ngIf="editedUser?.Moderator")
        td: small Special user:
        td.text-secondary Channel moderator
      tr(*ngIf="editedUser?.Follower")
        td: small Follower Since:
        td {{editedUser.FollowDate | date}}
      tr(*ngIf="editedUser?.Subscriber")
        td: small Subscriber Since:
        td {{editedUser.SubscribeDate | date}}

    hr

    mat-form-field
      input#user-title(matInput, name="user-title", placeholder="Title", [formControl]="userTitleControl")
      mat-hint Some commands prepend this value to the user's username.

    mat-form-field
      input#user-points(matInput, type="number", name="user-points", [placeholder]="undefined | points | async", required="true",
      [formControl]="userPointsControl", [errorStateMatcher]="fieldMatcher")
      mat-hint User {{undefined | points | async}}
      mat-error(*ngIf="userPointsControl.hasError('required')") This field is required!

    mat-form-field(*ngIf="editedUser?.Follower")
      input#user-follow-date(matInput, name="user-follow-date", placeholder="Follows Since",
      [formControl]="userFollowDateControl", [matDatepicker]="followDatePicker")
      mat-datepicker-toggle(matSuffix, [for]="followDatePicker")
      mat-datepicker(#followDatePicker="", [disabled]="false")
      mat-hint Only for correction purposes. Biliomi keeps track of followers via Twitch.

    mat-form-field(*ngIf="editedUser?.Subscriber")
      input#user-subscribe-date(matInput, name="user-subscribe-date", placeholder="Subscribed Since",
      [formControl]="userSubscribeDateControl", [matDatepicker]="subscribeDatePicker")
      mat-datepicker-toggle(matSuffix, [for]="subscribeDatePicker")
      mat-datepicker(#subscribeDatePicker="", [disabled]="false")
      mat-hint Only for correction purposes. Biliomi keeps track of subscribers via Twitch.


    mat-slide-toggle([hidden]="editedUser?.Caster || editedUser?.Moderator", [formControl]="userIsBlacklistedControl")
      | Blacklist User
    .checkbox-subscript
      .checkbox-hint
        | Blacklisted users are prohibited from posting commands.
      .checkbox-error([hidden]="editedUser?.BlacklistedSince == undefined")
        | {{editedUser?.DisplayName}} has been blacklisted since {{editedUser?.BlacklistedSince| date}}

    user-group-select(#userGroup="")

  mat-dialog-actions
    button(mat-raised-button, color="primary", [disabled]="!isFormOk", matTooltip="Save")
      mat-icon done
    button(mat-raised-button, type="button", color="warn", (click)="cancelEdit()", matTooltip="Cancel edit")
      mat-icon arrow_back
    button(mat-button, type="button", (click)="initFields()", matTooltip="Refresh data")
      mat-icon refresh
